## 多级页表

1.`目的`：为了解决需要维护的页表过大而生。

2.`多级页表的结构`：

![image](https://tva3.sinaimg.cn/large/0085EwgIgy1gtgkqd9gjvj611g0ostf802.jpg)

将前文说的2^20个页表项的单机页表进行再分页。将一级页表分成1024个耳机页表，每个二级页表对应1024个页表项。从而实现`二级分页`

3.`问题`：分了二级页表，映射 4GB 地址空间就需要 4KB（一级⻚表）+ 4MB（二级⻚表）的内存，这样占用空间不是更大了吗？

- 按照局部性原理，对大多数程序来说都不会使用到自己4GB的虚拟内存，有很多页表项都是空的，没有分配。如果一级页表没有被用到，二级页表自然就不会先分配。

>假设只有 20% 的一级⻚表项被用到了，那么⻚表占用的内存空间就只有 4KB（一级⻚表） + 20% * 4MB（二级⻚表）= 0.804MB

4.既然如此，那为什么一级页表做不到`用到时再分配呢`？

- 因为一级页表承担的将虚拟地址映射到物理地址，如果不分配页表项进行映射，相当于磁盘的地址就直接丢失了。



5.`问题`：多级页表解决了页表空间上的问题，带来了访问上的时间问题

解决方法：`TLB`,也就是快表