## 文件的存储

1.`文件的存储方式`：

- 连续空间存放
- 非连续空间存放

2.`连续空间存放`：

- 文件在磁盘中是连续存放的，因此只需一次寻道就可以加载出文件的所有内容
- 需要记录文件的大小和起始位置，不然不知道文件的边界

![image](https://tvax4.sinaimg.cn/large/0085EwgIgy1gtl4k7on2xj60o30ejdgp02.jpg)

- 缺点：
  - 磁盘碎片：文件删除会导致磁盘碎片的产生
  - 不易拓展：有可能出现扩大文件而需要牵一发而动全身，牵扯到后续的文件

3.`非连续空间存放`：链表，索引两种方式

4.`链表的形式`

- 隐式链表

  ![image](https://tva4.sinaimg.cn/large/0085EwgIgy1gtl4s18db3j60og09smxr02.jpg)

  文件头只记录了开始节点和结束节点。实现简单，但是如果需要定位某个特定位置，只能O(N)的遍历磁盘

- 显式链接

![image](https://tvax1.sinaimg.cn/large/0085EwgIgy1gtl4tbg8bej60mi0u4di202.jpg)

以文件分配表的形式记录文件的每个数据块的指针。

比如需要访问A文件，4中记录7代表下一个数据块从7的位置找，7中写着2代表从2找。最终就能全部读取A的文件

5.`索引的形式`：引入了索引数据块，记录文件的每个数据块的指针。

![image](https://tva2.sinaimg.cn/large/0085EwgIgy1gtl4wy97thj60nq0ck75c02.jpg)

优点：支持随机访问，不会造成磁盘空间碎片

缺点：索引数据块的存储需要开销

`一个小问题`：如果文件过大，一个索引数据块无法存取所有数据块的地址指针，该咋办？

- 可以使用多个索引数据块记录，他们之间用链表存储

