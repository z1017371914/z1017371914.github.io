## 内存分页

分段能产生连续的空间，但是处理内存碎片的方法开销很大。

于是转变思路，将内存分得更小一些，这就是`页(page)`

1.`分页`：将物理内存和虚拟内存切分成固定尺寸的大小。Linux中数据页的大小为4KB

![image](https://tva2.sinaimg.cn/large/0085EwgIgy1gtgker085ej60pe0g20vf02.jpg)

2.`缺页中断`：用户进程访问页表，查不到时，会产生缺页中断。

3.`分页的工作模式`：

- 换出：将不需要的页释放，分配给当前需要的进程
- 换入：加载新的页

![image](https://tva1.sinaimg.cn/large/0085EwgIgy1gtgkh2a8ekj60p80fygnl02.jpg)

4.`地址映射`：

- 虚拟地址：页号 + 页内偏移量
- 页表：虚拟地址页号 + 物理地址页号
- 物理地址：物理页号

![image](https://tva1.sinaimg.cn/large/0085EwgIgy1gtgkj215mwj60pm0jeabw02.jpg)

5.`优点`：以页分为分配单位，就不会发生无法分配内存给进程的尴尬情况了。

6.`缺点`：页表会非常大。

- 进程数量很多，为了维护其地址映射，页表就会非常大。

  >例如32位的系统，页的大小为4kB，就会有**2^20**个页需要维护。再假设每个页表项需要4B，那么页表的大小就会是**2^22B**,也就是4MB。如果有100个进程，那就是400MB。

7.`解决方法`：**多级页表**

