### TCC

1.`TCC`：Try-Confirm-Cancel，预留-确认-撤销

2.TCC和两阶段提交协议的区别是，TCC需要预先分配所需要的资源，从而再判断需要提交还是回滚。

3.`TCC`本质是补偿事务，针对每个操作都注册一个与其对应的`确认操作`和`补偿操作`.

4.`TCC`是`业务层面`的协议,不依赖于数据库来实现事务，而是通过业务代码来实现，减少了数据库的压力。但同时，业务代码也会很难实现。

> 有个腾讯的同学提起过他们支付业务对于2PC与TCC的取舍：2PC+定时任务撤掉提交。支付业务宁可超时也不可出错，而且TCC实现起来也很困难，所以他们选择了2PC+定时任务撤销提交。如果使用TCC，那实现场景会是这样：用户的扣款划入到冻结资金(相当于预分配资源)，再去决定是提交修改或者撤销。