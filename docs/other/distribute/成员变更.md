### 成员变更 

1.成员变更：业务需要，从而会增加或者减少节点的数量，这种情况下可能会出现集群的分裂，出现两个leader。

>配置：声明集群的节点范围。
>
>![image](https://tvax3.sinaimg.cn/large/0085EwgIgy1gtatkgfinfj30ob08kgnd.jpg)
>
>例如初始配置为（A,B,C),此时增加节点D，E。理论上配置应该为(A,B,C,D,E)。但事与愿违。
>
>![image](https://tvax2.sinaimg.cn/large/0085EwgIgy1gtatntdf5bj30o9067dj5.jpg)
>
>有可能C节点和A，B出现了网络分区(脑裂)，出现了(A，B，C)和(C,D,E)两个配置，进而出现两个leader的现象，这就是成员变更会出现的问题。

2.Raft的解决方法：`单节点变更(single-servers changes)`

>单节点变更：将添加/删除多个节点拆分成多次的添加/删除一个节点。
>
>实现过程：
>
>①需要添加节点D，leaderA就会先向节点D同步日志信息
>
>②将新的集群配置(A,B,C,D)作为日志项，发送给所有的节点。然后leader提交到自己的状态机，完成单节点的引入。
>
>同理，需要添加E时也一样，需要添加多少节点，就需要进行多少次单节点变更。
>
>单节点添加并发执行可能会出现某单节点还没执行结束，就添加新的单节点。

