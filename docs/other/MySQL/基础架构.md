## 基础架构

1.`MySQL的基本组成单元`：Server层 + Engine层

2.`Server层`：连接器 + 缓存 + 分析器 + 优化器 +执行器

3.`Engine层`：存储实际数据的，对Server层提供了读写接口；类似于插件式，可选择不同的引擎。

---

4.`一条SQL的执行过程`：

![image](https://tvax3.sinaimg.cn/large/0085EwgIgy1gtd7dcy75lj60od0i1grc02.jpg)

①Client发送查询请求

②连接器检查连接

③在缓存中读取是否命中，是的话直接返回结果；不是的话往下执行

④分析器对SQL进行类似编译原理中的词法分析，语法分析

⑤优化器对查询使用索引等方法，制定查询方案

⑥执行器根据执行访问，访问engine层的接口，然后返回结果

`ps`:缓存在后面已经被废弃掉，因为其命中率实在是太低下了，只有SQL完全相同时才会命中，就算颠倒顺序，也会导致缓存不命中。

### 连接器

1.`连接器`：负责和Client进行交互：建立连接，权限校验，维持连接。

### 缓存

已废弃，不多赘述。

### 分析器

1.`分析器`：进行词法分析和语法分析。

因为engine并不能识别SQL语句，SQL也类似于高级语言一样，需要进行编译成汇编，再转成二进制。

### 优化器

1.`优化器`：制定查询方法。为了加快查询，会利用索引，联表等操作来制定，就像系统的架构师一样，告诉你该怎么做

### 执行器

1.`执行器`：类似于中间人，收到优化器的执行方案后去和Engine层交互，调用Engine的接口来完成查询

