## 幻读

[参考链接](https://blog.csdn.net/qq_42799615/article/details/110942949)

1.`幻读`：一个事务的前后两次查询，后一次查询查到了前一次查询没查到的行。

2.`幻读的原因`：即使所有的记录都加上锁，还是无法阻止新插入的记录。

事务A查询第一次结束后，事务B马上insert的新的记录，当事务A再次查询时，就会出现幻读：**凭空的多了几条记录**。

3.就算是行锁，也无法解决幻读。所以有了`间隙锁`	

4.`间隙锁`：给记录之间的间隙也加上锁，防止两条记录之间会插入或者删除数据。

![image](https://tvax4.sinaimg.cn/large/0085EwgIgy1gtgalaa38nj60n10b6js102.jpg)

5.`锁的冲突`：行锁只有两个读锁才不冲突。

![image](https://tva3.sinaimg.cn/large/0085EwgIgy1gtgamld0kjj60ev06faak02.jpg)

而间隙锁只会阻塞一个操作：**往这个间隙插入一条记录**

5.间隙锁只有在`可重复读级别`下才会加。

