## 短连接风暴

1.`短连接`：连接上MySQL后，执行一些SQL就断开，下次需要服务就得重连

2.`短连接风暴`：一段时间内，可能连接数暴涨。

3.`连接需要的开销`：三次握手，权限校验，读写权限获取

4.`解决方案`：

- 断开掉连接但不工作的线程
- 降低连接的性能消耗

### 断开空闲连接

1.这种方法可能是有损的。

2.优先断开空闲太久的连接，再到断开`事务`内空闲太久的连接

如何判断空闲的线程？

3.

```sql
show processlist;
```

```sql
select * from information_schema.innodb_trx \G;
```

空闲的连接：show processlist读出来的状态是sleep

事务内的空闲连接：show processlist读出来的状态是sleep，且第二条sql查出来的trx_mysql_thread_id为空。

### 减少连接消耗

三次握手无可避免，那就`去掉权限验证`此步骤

这并不是一个好方法，不推荐。

